<p-toast [style]="{marginTop: '80px'}" position="top-right" key="form-toast"></p-toast>

<div class=" ui-g-12 ui-md-12 ui-lg-12 ui-xl-12">
  <p-card class="centralized">
    <p-header class="header-card-form">
      <div class="ui-helper-clearfix title-card-header">
        <span class="ui-panel-title">Adicionar nova Turma</span>
      </div>
    </p-header>
    <form [formGroup]="turmaForm">
      <div class="">
        <div class="ui-g ui-fluid">

            <div class="ui-g-12 ui-md-6 ui-lg-4">
              <label class="required" for="materia">Nome da Mat√©ria:</label>
              <div class="ui-inputgroup">
                <p-autoComplete id="materia" name="materia" formControlName="materia" [suggestions]="listMateria"
                  (completeMethod)="searchMateria($event)" [minLength]="1" placeholder="Materia" field="nome">
                </p-autoComplete>
              </div>
            </div>

            <div class="ui-g-12 ui-md-6 ui-lg-4">
                <label class="required" for="professor">Nome do Professor:</label>
                <div class="ui-inputgroup">
                  <p-autoComplete id="professor" name="professor" formControlName="professor" [suggestions]="listProfessor"
                    (completeMethod)="searchProfessor($event)" [minLength]="1" placeholder="Professor" field="nome">
                  </p-autoComplete>
                </div>
              </div>

              <div class="ui-g-12 ui-md-6 ui-lg-4">
                  <label class="required" for="professor">Vagas:</label>
                  <div class="ui-inputgroup">
                      <input #vagasFormInput type="text" id="vagas" name="vagas" pInputText formControlName="vagas" autocomplete="off" placeholder="Quantidade de Vagas"/>
                  </div>
                </div>

                


          <div class="ui-g-12 ui-md-12 ui-lg-12">
            <p-card class="centralized">
              <p-header class="header-card-form">
                <div class="ui-helper-clearfix title-card-header">
                  <span class="ui-panel-title">Alunos da Materia</span>
                </div>
              </p-header>
              <form [formGroup]="alunoTurmaForm">

                <div class="ui-g-12 ui-md-12 ui-lg-12">
                  <label class="required" for="itemName">Alunos:</label>
                <div id="statusdrpdown" #statusdropdown>
                    <p-dropdown [options]="alunos" formControlName="alunos" placeholder="Selecione um Aluno" optionLabel="nome" [showClear]="true"></p-dropdown>
                </div>
              </div>
                <p-footer>
                  <div class="group-button" style="text-align:left">
                    <button id="add-aluno-turma-button" type="button" pButton icon="pi pi-plus"
                      (click)="onAddAlunoTurma()" label="Adicionar Aluno"></button>
                  </div>
                </p-footer>
              </form>
              <p-table [columns]="alunosColumns" [value]="alunosTurma" [lazy]="true" [scrollable]="true" dataKey="id"
                [rows]="10" [paginator]="true" [pageLinks]="3" [responsive]="true">
                <ng-template pTemplate="header" let-columns>
                  <tr>
                    <th *ngFor="let col of columns">
                      {{col.header}}
                    </th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-alunosTurma let-columns="columns">
                  <tr [pSelectableRow]="rowData">
                    <td>
                      <span class="ui-column-title">Nome:</span>
                      {{alunosTurma?.nome}}
                    </td>
                    <td>
                      <span class="ui-column-title">Data Nascimento:</span>
                      {{alunosTurma?.dataNascimento}}
                    </td>
                    <td>
                      <span class="ui-column-title">CPF:</span>
                      {{alunosTurma?.cpf}}
                    </td>                    
                    <td>
                      <span class="ui-column-title"></span>
                      <p-button icon="pi pi-trash" styleClass="ui-button-danger action-icon"
                        (click)="onRemoveAlunoTurma(alunoTurma)"></p-button>
                    </td>
                  </tr>
                </ng-template>
                <ng-template pTemng plate="summary" *ngIf="items?.length !== 0">
                  Total {{alunoTurma?.length}} Alunos
                </ng-template>
              </p-table>

            </p-card>

          </div>
          
        </div>

        <p-footer>
          <div class="group-button">
            <button pButton type="button" (click)="onSave()" label="Salvar"
              class="ui-button-raised ui-button-success"></button>
            <button pButton type="button" (click)="onCancel()" label="Cancelar"
              class="ui-button-raised ui-button-danger"></button>
          </div>
        </p-footer>
      </div>
    </form>
  </p-card>
</div>